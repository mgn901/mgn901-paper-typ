#import "../mgn901-paper/utils.typ": q

#let font-settings-presets = (
  serif: (
    font-family: (
      latin: ("Nimbus Roman", "Times New Roman", "Century", "Libertinus Serif", "New Computer Modern"),
      cjk: (
        "Source Han Serif JP",
        "Noto Serif CJK JP",
        "Hiragino Mincho Pr6N",
        "Hiragino Mincho ProN",
        "YuMincho",
        "Yu Mincho",
        "MS Mincho",
      ),
    ),
    font-weight: 400,
    font-features: (:),
  ),
  sans: (
    font-family: (
      latin: ("Helvetica Neue", "Helvetica", "Arial"),
      cjk: (
        "Source Han Sans JP",
        "Noto Sans CJK JP",
        "Hiragino Sans",
        "YuGothic",
        "Yu Gothic",
        "MS Gothic",
      ),
    ),
    font-weight: 500,
    font-features: (:),
  ),
  heading: (
    font-family: (
      latin: ("Helvetica Neue", "Helvetica", "Arial"),
      cjk: (
        "Source Han Sans JP",
        "Noto Sans CJK JP",
        "Hiragino Sans",
        "YuGothic",
        "Yu Gothic",
        "MS Gothic",
      ),
    ),
    font-weight: 700,
    font-features: (:),
  ),
  monospace: (
    font-family: (
      latin: ("Courier New", "Dejavu Sans Mono"),
      cjk: (
        "Source Han Sans JP",
        "Noto Sans CJK JP",
        "Hiragino Sans",
        "YuGothic",
        "Yu Gothic",
        "MS Gothic",
      ),
    ),
    font-weight: 400,
    font-features: (:),
  ),
)

#let font-settings-presets-paper = (
  default: font-settings-presets.serif,
  heading: font-settings-presets.heading,
  footnote: font-settings-presets.serif,
  small: font-settings-presets.serif,
  monospace: font-settings-presets.monospace,
  strong: font-settings-presets.sans,
)

#let color-presets = (
  blue: (
    rgb("#f2f8ff"),
    rgb("#e3f4ff"),
    rgb("#c7e7ff"),
    rgb("#9fd1ff"),
    rgb("#6eb3ff"),
    rgb("#3890ff"),
    rgb("#006af5"),
    rgb("#0050bb"),
    rgb("#00367e"),
    rgb("#001c43"),
    rgb("#00050d"),
  ),
  green: (
    rgb("#f2fff9"),
    rgb("#d5fcea"),
    rgb("#b0f3d8"),
    rgb("#83e4c1"),
    rgb("#54cfa9"),
    rgb("#27b590"),
    rgb("#009575"),
    rgb("#007352"),
    rgb("#004e32"),
    rgb("#002b19"),
    rgb("#000d06"),
  ),
  red: (
    rgb("#fff4f2"),
    rgb("#ffede8"),
    rgb("#ffd9d3"),
    rgb("#ffbab2"),
    rgb("#ff9289"),
    rgb("#f1625b"),
    rgb("#dd302c"),
    rgb("#c50000"),
    rgb("#850700"),
    rgb("#460800"),
    rgb("#0d0200"),
  ),
  yellow: (
    rgb("#fffdf2"),
    rgb("#fff9d9"),
    rgb("#fbefb6"),
    rgb("#f1df8b"),
    rgb("#e1c85b"),
    rgb("#caad2b"),
    rgb("#af8e00"),
    rgb("#866e00"),
    rgb("#5b4b00"),
    rgb("#312900"),
    rgb("#0d0b00"),
  ),
  gray1: (
    rgb("#ffffff"),
    rgb("#fcfbfa"),
    rgb("#f4f2ef"),
    rgb("#e5e2de"),
    rgb("#d0ccc8"),
    rgb("#b5b1ac"),
    rgb("#94908b"),
    rgb("#6f6c67"),
    rgb("#474542"),
    rgb("#21201e"),
    rgb("#000000"),
  ),
  gray2: (
    rgb("#ffffff"),
    rgb("#f8fafc"),
    rgb("#eceff4"),
    rgb("#dadee5"),
    rgb("#c3c7d0"),
    rgb("#a7acb5"),
    rgb("#888c94"),
    rgb("#65686f"),
    rgb("#414347"),
    rgb("#1e1f21"),
    rgb("#000000"),
  ),
)

#let pallete = (
  g0: (
    rgb("#fbf7f2"),
    rgb("#ece6e0"),
    rgb("#dad3cc"),
    rgb("#c6bfb6"),
    rgb("#b1a89f"),
    rgb("#9a9187"),
    rgb("#82786d"),
    rgb("#665e56"),
    rgb("#4a443e"),
    rgb("#2d2a27"),
    rgb("#12110f"),
  ),
  g1: (
    rgb("#f6f8fb"),
    rgb("#e3e7ee"),
    rgb("#d0d4dd"),
    rgb("#bbc0c9"),
    rgb("#a5aab4"),
    rgb("#8d929e"),
    rgb("#747986"),
    rgb("#5b6069"),
    rgb("#42454c"),
    rgb("#292b2f"),
    rgb("#101113"),
  ),
  r8: (
    rgb("#fff5f4"),
    rgb("#ffe0da"),
    rgb("#ffc6bd"),
    rgb("#fda89c"),
    rgb("#f98676"),
    rgb("#f25b4b"),
    rgb("#e70003"),
    rgb("#b5150f"),
    rgb("#831710"),
    rgb("#51110c"),
    rgb("#230805"),
  ),
  r7y1: (
    rgb("#fff6f4"),
    rgb("#ffe1d9"),
    rgb("#ffc8ba"),
    rgb("#fbad98"),
    rgb("#f48d73"),
    rgb("#ea6949"),
    rgb("#dc3900"),
    rgb("#ac320f"),
    rgb("#7c2710"),
    rgb("#4e190c"),
    rgb("#210a06"),
  ),
  r6y2: (
    rgb("#fff6f3"),
    rgb("#ffe1d6"),
    rgb("#fccab7"),
    rgb("#f6b096"),
    rgb("#ec9371"),
    rgb("#e07347"),
    rgb("#cf4d00"),
    rgb("#a23f0f"),
    rgb("#752f10"),
    rgb("#491e0c"),
    rgb("#1f0c06"),
  ),
  r5y3: (
    rgb("#fff6f1"),
    rgb("#fee2d3"),
    rgb("#fbcab2"),
    rgb("#f5b08c"),
    rgb("#ec9362"),
    rgb("#d9763e"),
    rgb("#c45800"),
    rgb("#99470e"),
    rgb("#6f3410"),
    rgb("#45210c"),
    rgb("#1d0d05"),
  ),
  r4y4: (
    rgb("#fff6f0"),
    rgb("#fce2d1"),
    rgb("#f8ccaf"),
    rgb("#f1b288"),
    rgb("#e49862"),
    rgb("#d17d3e"),
    rgb("#bb6000"),
    rgb("#924d0f"),
    rgb("#6a3810"),
    rgb("#42230c"),
    rgb("#1c0e05"),
  ),
  r3y5: (
    rgb("#fff6ef"),
    rgb("#fbe3cf"),
    rgb("#f5cdab"),
    rgb("#edb482"),
    rgb("#dc9c62"),
    rgb("#c8823d"),
    rgb("#b16600"),
    rgb("#8b510e"),
    rgb("#643b10"),
    rgb("#3e250c"),
    rgb("#1a0f05"),
  ),
  r2y6: (
    rgb("#fff6ed"),
    rgb("#fae4cb"),
    rgb("#f3cea6"),
    rgb("#e7b781"),
    rgb("#d5a061"),
    rgb("#c0863d"),
    rgb("#a96b00"),
    rgb("#85550e"),
    rgb("#603e10"),
    rgb("#3b270c"),
    rgb("#190f05"),
  ),
  r1y7: (
    rgb("#fff7eb"),
    rgb("#f8e4c7"),
    rgb("#f0d09f"),
    rgb("#e0ba80"),
    rgb("#cda361"),
    rgb("#b88a3d"),
    rgb("#a17000"),
    rgb("#7e580e"),
    rgb("#5b4010"),
    rgb("#38280c"),
    rgb("#171005"),
  ),
  y8: (
    rgb("#fdf7e9"),
    rgb("#f6e6c3"),
    rgb("#ead29d"),
    rgb("#d9bd80"),
    rgb("#c5a661"),
    rgb("#b08e3d"),
    rgb("#997300"),
    rgb("#785b0e"),
    rgb("#564210"),
    rgb("#35290c"),
    rgb("#161005"),
  ),
  y7g1: (
    rgb("#fcf8e3"),
    rgb("#f0e8b9"),
    rgb("#dfd69d"),
    rgb("#ccc180"),
    rgb("#b7ab60"),
    rgb("#a1933c"),
    rgb("#8a7900"),
    rgb("#6c600e"),
    rgb("#4e450f"),
    rgb("#302b0b"),
    rgb("#131105"),
  ),
  y6g2: (
    rgb("#f9fbd2"),
    rgb("#e9ebb9"),
    rgb("#d7d89d"),
    rgb("#c3c480"),
    rgb("#adae60"),
    rgb("#96973c"),
    rgb("#7f7d00"),
    rgb("#63630e"),
    rgb("#48470f"),
    rgb("#2c2c0b"),
    rgb("#111205"),
  ),
  y5g3: (
    rgb("#f5fbdd"),
    rgb("#e3ecb9"),
    rgb("#cfda9d"),
    rgb("#bac680"),
    rgb("#a4b060"),
    rgb("#8c993c"),
    rgb("#748000"),
    rgb("#5b640d"),
    rgb("#41480f"),
    rgb("#282d0b"),
    rgb("#101205"),
  ),
  y4g4: (
    rgb("#f2fbe2"),
    rgb("#dceeb9"),
    rgb("#c8dc9d"),
    rgb("#b2c880"),
    rgb("#9ab260"),
    rgb("#829b3c"),
    rgb("#688200"),
    rgb("#52660d"),
    rgb("#3b4a0f"),
    rgb("#242d0b"),
    rgb("#0e1205"),
  ),
  y3g5: (
    rgb("#f0fce4"),
    rgb("#d6f0b9"),
    rgb("#c0de9d"),
    rgb("#a9ca80"),
    rgb("#91b560"),
    rgb("#779e3c"),
    rgb("#5c8600"),
    rgb("#49690d"),
    rgb("#354b0f"),
    rgb("#202e0b"),
    rgb("#0c1205"),
  ),
  y2g6: (
    rgb("#eefce6"),
    rgb("#cff2b9"),
    rgb("#b8e09d"),
    rgb("#9fcc7f"),
    rgb("#85b760"),
    rgb("#6aa03c"),
    rgb("#4d8800"),
    rgb("#3d6a0d"),
    rgb("#2c4c0e"),
    rgb("#1b2f0a"),
    rgb("#0a1305"),
  ),
  y1g7: (
    rgb("#ecfce7"),
    rgb("#c8f3b9"),
    rgb("#afe19d"),
    rgb("#94ce7f"),
    rgb("#78b95f"),
    rgb("#5aa23c"),
    rgb("#388a00"),
    rgb("#2e6b0c"),
    rgb("#224d0e"),
    rgb("#152f0a"),
    rgb("#081304"),
  ),
  g8: (
    rgb("#eafde8"),
    rgb("#c2f4bc"),
    rgb("#a4e39c"),
    rgb("#87cf7f"),
    rgb("#67ba5f"),
    rgb("#44a43b"),
    rgb("#0e8b00"),
    rgb("#146d0c"),
    rgb("#124e0d"),
    rgb("#0d300a"),
    rgb("#051304"),
  ),
  g7t1: (
    rgb("#eafcec"),
    rgb("#c1f3c6"),
    rgb("#a3e2ab"),
    rgb("#86cf90"),
    rgb("#66ba74"),
    rgb("#41a456"),
    rgb("#008b35"),
    rgb("#0f6d2b"),
    rgb("#104e20"),
    rgb("#0c3014"),
    rgb("#051307"),
  ),
  g6t2: (
    rgb("#eafcee"),
    rgb("#bff3ce"),
    rgb("#a3e1b6"),
    rgb("#86ce9d"),
    rgb("#66b983"),
    rgb("#41a267"),
    rgb("#008b4b"),
    rgb("#0f6c3b"),
    rgb("#104d2b"),
    rgb("#0c2f1a"),
    rgb("#051309"),
  ),
  g5t3: (
    rgb("#e9fcf1"),
    rgb("#bff2d5"),
    rgb("#a3e0bf"),
    rgb("#86cda7"),
    rgb("#66b88e"),
    rgb("#41a174"),
    rgb("#008959"),
    rgb("#0f6b46"),
    rgb("#104d33"),
    rgb("#0c2f1f"),
    rgb("#05120b"),
  ),
  g4t4: (
    rgb("#e9fcf3"),
    rgb("#bff2db"),
    rgb("#a3e0c6"),
    rgb("#86ccaf"),
    rgb("#66b797"),
    rgb("#41a07e"),
    rgb("#008865"),
    rgb("#0f6a4f"),
    rgb("#104c39"),
    rgb("#0c2f22"),
    rgb("#05120d"),
  ),
  g3t5: (
    rgb("#e9fcf5"),
    rgb("#bff1e1"),
    rgb("#a4e0cd"),
    rgb("#86ccb7"),
    rgb("#67b7a0"),
    rgb("#42a088"),
    rgb("#00896f"),
    rgb("#0f6b57"),
    rgb("#114c3e"),
    rgb("#0c2f26"),
    rgb("#05120e"),
  ),
  g2t6: (
    rgb("#e8fcf7"),
    rgb("#bff1e6"),
    rgb("#a4dfd2"),
    rgb("#86cbbd"),
    rgb("#66b6a7"),
    rgb("#429f8f"),
    rgb("#008777"),
    rgb("#0f6a5d"),
    rgb("#114c43"),
    rgb("#0c2e29"),
    rgb("#051210"),
  ),
  g1t7: (
    rgb("#e8fcf9"),
    rgb("#bff0ea"),
    rgb("#a4ded7"),
    rgb("#86cac3"),
    rgb("#66b5ad"),
    rgb("#429e96"),
    rgb("#00877e"),
    rgb("#0f6963"),
    rgb("#114b47"),
    rgb("#0c2e2b"),
    rgb("#051211"),
  ),
  t8: (
    rgb("#e7fcfb"),
    rgb("#bff0ef"),
    rgb("#a4dedd"),
    rgb("#87cbca"),
    rgb("#67b5b5"),
    rgb("#429f9e"),
    rgb("#008787"),
    rgb("#0f6969"),
    rgb("#114c4c"),
    rgb("#0d2e2e"),
    rgb("#051212"),
  ),
  t7b1: (
    rgb("#ebfafd"),
    rgb("#c7edf5"),
    rgb("#a3ddea"),
    rgb("#86c9d8"),
    rgb("#66b4c4"),
    rgb("#429daf"),
    rgb("#008498"),
    rgb("#0f6877"),
    rgb("#114b55"),
    rgb("#0d2e34"),
    rgb("#051215"),
  ),
  t6b2: (
    rgb("#edf9ff"),
    rgb("#ccebf8"),
    rgb("#a7dbf0"),
    rgb("#86c8e1"),
    rgb("#66b2ce"),
    rgb("#419bba"),
    rgb("#0083a4"),
    rgb("#0f6680"),
    rgb("#114a5c"),
    rgb("#0c2d38"),
    rgb("#051217"),
  ),
  t5b3: (
    rgb("#eef9ff"),
    rgb("#cfeafa"),
    rgb("#acd9f3"),
    rgb("#86c7ea"),
    rgb("#66b1d8"),
    rgb("#4199c5"),
    rgb("#0080af"),
    rgb("#0f6588"),
    rgb("#114962"),
    rgb("#0c2d3c"),
    rgb("#051219"),
  ),
  t4b4: (
    rgb("#f0f8ff"),
    rgb("#d2e9fc"),
    rgb("#b0d8f6"),
    rgb("#8bc5f0"),
    rgb("#66b0e3"),
    rgb("#4198d1"),
    rgb("#007ebc"),
    rgb("#0f6393"),
    rgb("#114869"),
    rgb("#0c2c41"),
    rgb("#05121b"),
  ),
  t3b5: (
    rgb("#f1f8ff"),
    rgb("#d4e9fe"),
    rgb("#b3d7fa"),
    rgb("#8fc4f6"),
    rgb("#66aeef"),
    rgb("#4096df"),
    rgb("#007bcb"),
    rgb("#0f619e"),
    rgb("#104671"),
    rgb("#0c2b46"),
    rgb("#05111d"),
  ),
  t2b6: (
    rgb("#f2f8ff"),
    rgb("#d7e9ff"),
    rgb("#b8d7fd"),
    rgb("#97c3f9"),
    rgb("#72adf3"),
    rgb("#4894eb"),
    rgb("#0078e0"),
    rgb("#0e5fae"),
    rgb("#10457d"),
    rgb("#0c2b4d"),
    rgb("#051120"),
  ),
  t1b7: (
    rgb("#f4f8ff"),
    rgb("#dae8fe"),
    rgb("#bdd6ff"),
    rgb("#9cc2ff"),
    rgb("#77abff"),
    rgb("#4b90ff"),
    rgb("#026fff"),
    rgb("#0e58c6"),
    rgb("#0f418e"),
    rgb("#0b2958"),
    rgb("#051125"),
  ),
  b8: (
    rgb("#f5f8ff"),
    rgb("#dde8fe"),
    rgb("#c3d6ff"),
    rgb("#a4c1ff"),
    rgb("#83a9ff"),
    rgb("#5e8eff"),
    rgb("#376cff"),
    rgb("#2d56c6"),
    rgb("#22408f"),
    rgb("#152858"),
    rgb("#081126"),
  ),
  b7p1: (
    rgb("#f6f8ff"),
    rgb("#e1e8fe"),
    rgb("#c9d6fe"),
    rgb("#aec0ff"),
    rgb("#91a8ff"),
    rgb("#728bff"),
    rgb("#5468ff"),
    rgb("#4353c7"),
    rgb("#313e8f"),
    rgb("#1e2759"),
    rgb("#0b1026"),
  ),
  b6p2: (
    rgb("#f7f8ff"),
    rgb("#e4e8fe"),
    rgb("#cfd5fe"),
    rgb("#b7beff"),
    rgb("#9da5ff"),
    rgb("#8387ff"),
    rgb("#6962ff"),
    rgb("#534fc7"),
    rgb("#3c3b8f"),
    rgb("#252559"),
    rgb("#0f1026"),
  ),
  b5p3: (
    rgb("#f8f8ff"),
    rgb("#e7e7fe"),
    rgb("#d4d3fe"),
    rgb("#bfbcff"),
    rgb("#a9a1ff"),
    rgb("#9282ff"),
    rgb("#7b59ff"),
    rgb("#6149c7"),
    rgb("#47378f"),
    rgb("#2c2359"),
    rgb("#120f26"),
  ),
  b4p4: (
    rgb("#f9f8ff"),
    rgb("#ebe6fe"),
    rgb("#dbd2fe"),
    rgb("#c9baff"),
    rgb("#b59eff"),
    rgb("#a27cff"),
    rgb("#8e50ff"),
    rgb("#7042c7"),
    rgb("#513290"),
    rgb("#322159"),
    rgb("#150e26"),
  ),
  b3p5: (
    rgb("#faf7ff"),
    rgb("#eee6fe"),
    rgb("#e1d0fe"),
    rgb("#d3b7ff"),
    rgb("#c399ff"),
    rgb("#b274ff"),
    rgb("#a13fff"),
    rgb("#7f37c7"),
    rgb("#5c2c90"),
    rgb("#391d5a"),
    rgb("#180c27"),
  ),
  b2p6: (
    rgb("#fbf7ff"),
    rgb("#f2e4fe"),
    rgb("#e9cdfe"),
    rgb("#deb1ff"),
    rgb("#d290ff"),
    rgb("#c466ff"),
    rgb("#b614ff"),
    rgb("#8f1fc7"),
    rgb("#681d90"),
    rgb("#41165a"),
    rgb("#1b0a27"),
  ),
  b1p7: (
    rgb("#fdf6ff"),
    rgb("#f8e0ff"),
    rgb("#f3c6ff"),
    rgb("#eaa9fc"),
    rgb("#e086f8"),
    rgb("#d35bf1"),
    rgb("#c200e8"),
    rgb("#9917b6"),
    rgb("#6f1983"),
    rgb("#451352"),
    rgb("#1d0923"),
  ),
  p8: (
    rgb("#fff5fe"),
    rgb("#ffddfd"),
    rgb("#fcc2f9"),
    rgb("#f5a3f2"),
    rgb("#eb80e9"),
    rgb("#de56dd"),
    rgb("#cc00ce"),
    rgb("#a116a1"),
    rgb("#741875"),
    rgb("#491249"),
    rgb("#1f081f"),
  ),
  p7r1: (
    rgb("#fff5fa"),
    rgb("#ffdef1"),
    rgb("#ffc2e5"),
    rgb("#fba4d8"),
    rgb("#f381c8"),
    rgb("#e856b7"),
    rgb("#d800a3"),
    rgb("#aa1580"),
    rgb("#7b175d"),
    rgb("#4d113a"),
    rgb("#210818"),
  ),
  p6r2: (
    rgb("#fff5f9"),
    rgb("#ffdfeb"),
    rgb("#ffc3db"),
    rgb("#fba5c9"),
    rgb("#f582b5"),
    rgb("#eb57a0"),
    rgb("#de0089"),
    rgb("#ae156c"),
    rgb("#7e164e"),
    rgb("#4e1131"),
    rgb("#220814"),
  ),
  p5r3: (
    rgb("#fff5f8"),
    rgb("#ffdfe7"),
    rgb("#ffc5d4"),
    rgb("#fca6bf"),
    rgb("#f783a8"),
    rgb("#ee588f"),
    rgb("#e10074"),
    rgb("#b1155c"),
    rgb("#801643"),
    rgb("#50112a"),
    rgb("#220811"),
  ),
  p4r4: (
    rgb("#fff5f7"),
    rgb("#ffdfe4"),
    rgb("#ffc5ce"),
    rgb("#fca7b6"),
    rgb("#f7849c"),
    rgb("#ef5980"),
    rgb("#e30062"),
    rgb("#b2154e"),
    rgb("#811639"),
    rgb("#501123"),
    rgb("#23080e"),
  ),
  p3r5: (
    rgb("#fff5f6"),
    rgb("#ffdfe1"),
    rgb("#ffc5c9"),
    rgb("#fda7af"),
    rgb("#f88491"),
    rgb("#f05972"),
    rgb("#e40050"),
    rgb("#b31541"),
    rgb("#811630"),
    rgb("#51111e"),
    rgb("#23080b"),
  ),
  p2r6: (
    rgb("#fff5f5"),
    rgb("#ffdfdf"),
    rgb("#ffc5c5"),
    rgb("#fda7a8"),
    rgb("#f88588"),
    rgb("#f15a65"),
    rgb("#e6003e"),
    rgb("#b41533"),
    rgb("#821626"),
    rgb("#511118"),
    rgb("#230809"),
  ),
  p1r7: (
    rgb("#fff5f4"),
    rgb("#ffdfdc"),
    rgb("#ffc6c0"),
    rgb("#fda8a1"),
    rgb("#f9857f"),
    rgb("#f15a58"),
    rgb("#e6002a"),
    rgb("#b41524"),
    rgb("#82171c"),
    rgb("#511112"),
    rgb("#230807"),
  ),
)

#let color-entries = (
  ..pallete
    .pairs()
    .map(hue-step => (
      hue-step.at(1).enumerate().map(color => (hue-step.at(0) + "-" + str(color.at(0) * 100), color.at(1)))
    ))
    .fold((), (prev, hue-step) => (..prev, ..hue-step)),
  ("white", white),
  ("black", black),
)

#let color-style-tokens = color-entries.fold((:), (prev, color-entry) => {
  prev.insert("bg-" + color-entry.at(0), (fill: color-entry.at(1)))
  prev.insert("blbg-" + color-entry.at(0), (block-fill: color-entry.at(1)))
  prev.insert("bxbg-" + color-entry.at(0), (box-fill: color-entry.at(1)))
  prev.insert("text-" + color-entry.at(0), (text-fill: color-entry.at(1)))
  prev.insert("border-" + color-entry.at(0), (stroke-paint: color-entry.at(1)))
  prev.insert("blborder-" + color-entry.at(0), (block-stroke-paint: color-entry.at(1)))
  prev.insert("bxborder-" + color-entry.at(0), (box-stroke-paint: color-entry.at(1)))
  return prev
})
